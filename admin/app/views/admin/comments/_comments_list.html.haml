.content-header

%section#comment-section.content
  = hidden_field_tag :authenticity_token, form_authenticity_token
  .container-fluid
    .mb-2
    .row
      .col-12
        .card
          .card-header
            .card-tools.float-left
              = form_tag comments_path, method: :get do
                .input-group.input-group-m.mt-0
                  %span{ style: "font-size: 1.6rem; font-weight: 500; margin-right: 10px;"} Comments
                  =select_tag "status", options_for_select(Comment.statuses.map{|k, v| [k.humanize, v]}, params[:status]), {prompt: "Status", class: "form-control float-right", style: "width: 150px; margin-left: 50px;", onchange: "this.form.submit();" }
                  .input-group-append
                    %button.btn.btn-default{:type => "submit"}
                      %i.fas.fa-search
                  =select_tag "owner_type", options_for_select(Comment.all.pluck(:owner_type).uniq.map{|v| [v, v]}, params[:owner_type]), {prompt: "Owner", class: "form-control float-right", style: "width: 150px; margin-left: 50px;", onchange: "this.form.submit();" }
                  .input-group-append
                    %button.btn.btn-default{:type => "submit"}
                      %i.fas.fa-search

          .card-body.table-responsive.p-0
            %table.table.table-hover.text-nowrap.table-head-fixed.limit-width-table
              %thead
                %tr
                  %th{style: "width: 5%"}
                  %th{style: "width: 50%"} Content
                  %th Name
                  %th Email
                  %th Mobile
                  %th{style: "width: 10%"} Owner
                  %th{style: "width: 5%"} Status
                  %th{style: "width: 5%"} Rate
                  %th{style: "width: 10%"} Created At
                  %th{style: "width: 15%"} Actions
              %tbody
                - comments.each do |comment|
                  = render 'admin/comments/comment_item', comment: comment
                  = render 'admin/comments/reply_list', comment: comment
#commentFormModal.modal.fade{"aria-hidden" => "true", "aria-labelledby" => "albumFormModalLabel", :role => "dialog", :tabindex => "-1"}
#editReplyModal.modal.fade{"aria-hidden" => "true", "aria-labelledby" => "albumFormModalLabel", :role => "dialog", :tabindex => "-1"}
  .modal-dialog{:role => "document"}
    .modal-content
      .modal-header
        %h5.modal-title Edit Reply
        %button.close{"aria-label" => "Close", "data-dismiss" => "modal", :type => "button"}
          %span{"aria-hidden" => "true"} Ã—
      .modal-body
        .form-group
          %form#edit-reply-modal-form
            %input{type: "hidden", value: "", name: 'id'} 
            %label.d-block Reply
            %textarea.form-control{name: "content", rows: 3}
      .modal-footer
        %button.btn.btn-secondary{"data-dismiss" => "modal", :type => "button"} Close
        %button.btn.btn-primary{type: "submit", form: "edit-reply-modal-form"} Submit

.row
  .col-sm-12.col-md-5
    .form-inline
      %span= meta_count @comments
      %span
        =form_tag send("comments_path"), method: :get do
          -params.except(:controller, :action, :page_size, :page).each do |k, v|
            =hidden_field_tag  k, v
          =select_tag :page_size, options_for_select([10, 20, 50, 100], params[:page_size] || 20), { class: "custom-select my-1", onchange: "this.form.submit();" }
  .col-sm-12.col-md-7
    .float-right= paginate @comments, theme: "twitter-bootstrap-4"
